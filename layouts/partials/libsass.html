
<!-- sass options common to dev and production -->
{{ $commonOpts := (dict "transpiler" "libsass" "includePaths" (slice "node_modules"))}}
<!-- dev options -->
{{ $optsToCSS := merge $commonOpts (dict "outputStyle" "compressed") }}
<!-- production options -->
{{ if eq hugo.Environment "development" }}
{{ $optsToCSS = merge $commonOpts (dict "enableSourceMap" true) }}
{{ end }}
<!-- get source file and compile -->
{{ $css := resources.Get . }}
{{ $css = $css | toCSS $optsToCSS }}
<!-- insert link into html -->
<link rel="stylesheet" href="{{ $css.RelPermalink }}" integrity="{{ $css.Data.Integrity }}">
